{% extends "layout.html" %}

{% block title %}
Recovery key
{% endblock %}

{% block header %}
<article>
  <header>
    <h1>Recovery key</h1>
    <!-- This code retrieves information through the flash module of flask -->
    {% with messages = get_flashed_messages(category_filter=["success", "error"]) %}
    {% if messages %}
    <ul class="flashes container">
      {% for message in messages %}
      <li style="list-style-type:none;"><strong><mark>{{ message }}</mark></strong></li>
      {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
  </header>
  <div class="container">
    <p>
      The following string of text is your account recovery key. This key
      will be requested in case you completely forget or miss your account
      password.
    </p>
    <p class="mx-centered">
      <mark>
        <strong>
          Please keep this recovery key in a safe place, such as a password
          manager or stored in a secret physical medium.
        </strong>
      </mark>
    </p>

    <input type="text" style="font-family:monospace; font-weight: bold; text-align:center;" value="{{ uuid }}" readonly>
    <p>
      Additionally, make sure to regularly backup this recovery key to ensure
      that you can always access your account, even in the event of a data loss
      or computer failure.
    </p>
  </div>
  <div>
    <hr>

    <h2>Generating a new recovery key</h2>

    <form action="/recovery_key" method="post" class="container">
      <p>
        If you suspect that your recovery key has been compromised, you
        can generate a new one immediately by typing "<strong><i>generate a
            new recovery key</strong></i>" in the following input text field and
        submitting the form down below.
      </p>
      <label for="uuid">
        <input type="text" id="generate" name="generate"
          placeholder="Fill out this form and submit it to generate a new recovery key." autocomplete="off">
      </label>
      <p>
        <i>
          Please note that generating a new recovery key will <b>replace</b> the previous one.
        </i>
      </p>
      <button type="submit"><strong>Submit</strong></button>
    </form>
  </div>

  <footer>
    <nav>
      <ul>
        <li><a href="/profile" class="outline">Back to profile</a></li>
      </ul>
    </nav>
  </footer>
</article>
{% endblock %}